/**
*   @file
*   @version 1.0.0
*
*   @brief
*   @details
*
*   @{
*/
/*==================================================================================================
*
==================================================================================================*/

#ifdef __cplusplus
extern "C"{
#endif

/*==================================================================================================
*                                        INCLUDE FILES
==================================================================================================*/
#include <stdio.h>
#include <setjmp.h>

/*==================================================================================================
*                              SOURCE FILE VERSION INFORMATION
==================================================================================================*/


/*==================================================================================================
*                                     FILE VERSION CHECKS
==================================================================================================*/


/*==================================================================================================
*                          LOCAL TYPEDEFS (STRUCTURES, UNIONS, ENUMS)
==================================================================================================*/
typedef enum
{
    DIVIDE_BY_0 = 0x1U,
} exception_code_t;

/*==================================================================================================
*                                       LOCAL MACROS
==================================================================================================*/
#define TRY                                  \
  if ((exception_code = setjmp( env )) == 0) \

#define CATCH(x) else if ( exception_code == (x) )

#define THROW(x) longjmp( env, (x) );

/*==================================================================================================
*                                      LOCAL CONSTANTS
==================================================================================================*/


/*==================================================================================================
*                                      LOCAL VARIABLES
==================================================================================================*/
static jmp_buf env;

static exception_code_t exception_code;
/*==================================================================================================
*                                      GLOBAL CONSTANTS
==================================================================================================*/


/*==================================================================================================
*                                      GLOBAL VARIABLES
==================================================================================================*/


/*==================================================================================================
*                                   LOCAL FUNCTION PROTOTYPES
==================================================================================================*/
double divide( int a, int b );

/*==================================================================================================
*                                       LOCAL FUNCTIONS
==================================================================================================*/
double divide( int a, int b )
{
    if ( b == 0 )
    {
        THROW(DIVIDE_BY_0);
    }

    return (double)(a / b);
}

int main()
{
    int a = 10;
    int b = 0;
    double result = 0.0;

    TRY
    {
        divide( a, b );
    }
    CATCH(DIVIDE_BY_0)
    {
        printf("Error: Divide by 0!\n");
    }

    return 0;
}
#ifdef __cplusplus
}
#endif

/** @} */
